{% extends "layout_base.html" %}
{% load static from staticfiles %}

{% block title %}Challenges{% endblock title %}

{% block breadcrumbs %}
<ul class="breadcrumb">
    <li><a href="{% url 'index' %}">Home</a> <span class="divider">/</span></li>
    <li class="active">Challenge List</li>
</ul>
{% endblock breadcrumbs %}

{% block body %}

    <div class="row">
      <div class="span12">
        <ul class="nav nav-pills">
        <li {% if filter == "incomplete" %}class="active"{% endif %} ><a href="?filter=incomplete">Incomplete Projects</a></li>
        <li {% if filter == "size" %}class="active"{% endif %} ><a href="?filter=size">Size Records</a></li>
        <li {% if filter == "speed" %}class="active"{% endif %} ><a href="?filter=speed">Speed Records</a></li>
        <li {% if filter == "sos" %}class="active"{% endif %} ><a href="?filter=sos">Help Needed</a></li>
        <li {% if filter == "all" %}class="active"{% endif %} ><a href="?filter=all">All Challenges</a></li>
        </ul>
      </div>
        
        {% for challenge_list in challenge_columns %}
        <div class="span6">
            {% for c, complete, size, size_complete, speed, speed_complete, sos in challenge_list %}
            <div class="media well">
                <a class="pull-left" href="{% url 'challenge' name=c.slug %}">
                <img class="media-object img-polaroid" src="{% static 'img/challenge/' %}{{c.graphic}}.png" alt="" />
                </a>
                <div class="media-body">
{% if complete and c.autograde %}
<a href="{% url 'sos' name=c.slug %}" class="btn btn-small {% if sos == 0 %}disabled{% else %}btn-danger{% endif %} pull-right media-heading">SOS <i class="icon-user {% if sos > 0 %}icon-white{% endif %}"></i>{{sos}}</a>
{% endif %}
                    <h4 class="media-heading">{{c.name}}</h4>
                    <strong>Level {{ c.difficulty }} Challenge ({{ c.xp }} XP)</strong>
                    <table class="table table-condensed">
                    <tr>
                        <td><em>Complete</em></td>
                        <td></td>
                        <td>{% if complete %}<i class="icon-ok"></i>
                            {% else %}<i class="icon-minus"></i>{% endif %}</td>
                    </tr>
                    {% if c.autograde %}
                    <tr>
                        <td><em>Size</em></td>
                        <td>{{ size }}</td>
                        <td>{% if size_complete %}<i class="icon-ok"></i>
                            {% else %}<i class="icon-minus"></i>{% endif %}</td>
                    </tr>
                    <tr>
                        <td><em>Speed</em></td>
                        <td>{{ speed }}</td>
                        <td>{% if speed_complete %}<i class="icon-ok"></i>
                            {% else %}<i class="icon-minus"></i>{% endif %}</td></td>
                    </tr>
                    {% endif %}
                    </table>
                    
                    {% if c.is_jam %}
                    <small>
                    When you submit a link for a game jam, you'll need to wait for
                    the instructor to check it out before this challenge is marked
                    complete.
                    </small>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        {% endfor %}
        
    </div>


{% endblock body %}
