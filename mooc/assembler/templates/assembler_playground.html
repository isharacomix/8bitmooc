{% extends "layout_base.html" %}
{% load static from staticfiles %}

{% block title %}Playground{% endblock title %}

{% block body %}

    <div class="row">
        <form name="input" action="{% url 'playground' %}" method="post">{% csrf_token %}
        <div class="span8">
            <div>

<input class="input-block-level" type="text" placeholder="Enter the name of your program here" name="name" value="{{ name }}"></input>
{% if user.is_authenticated %}
<label class="checkbox">
    Save this program to your public game library?
    <input type="checkbox" name="public" value="True" />
</label>
{% endif %}
<select name="pattern">
{% if mypattern %}
    <option value="{{mypattern.name}}">Current sprite sheet: {{mypattern.name}}</option>
{% endif %}
{% for p in patterns %}
    <option value="{{p.name}}">Sprite sheet: {{p.name}}</option>
{% endfor %}
</select>

<textarea class="input-block-level code-input" rows="20" name="code" wrap="soft">{{ source_code }}</textarea>

            </div>
            <div class="well">
              {% include "assembler_cheatsheet.html" %}
            </div>
        </div>
        
        <div class="span4">
    
        
            <div id="emulator"></div>
    
        
            <input type="submit" name="run" value="Assemble" />
            <input type="submit" name="assemble" value="Download" />
        </div>
        </form>
    </div>

{% endblock body %}


{% block scripts %}
    <script src="{% static 'js/dynamicaudio-min.js' %}" type="text/javascript" charset="utf-8"></script>
    <script src="{% static 'js/jsnes.js' %}" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">
        var nes;
        $(function() {
            nes = new JSNES({
                'swfPath': '{% static "js/" %}',
                'ui': $('#emulator').JSNESUI("/rom/")
            });
        });
    </script>
    <!--[if IE]>
        <script type="text/vbscript" src="source/jsnes-ie-hacks.vbscript"></script>
    <![endif]-->
{% endblock scripts %}

